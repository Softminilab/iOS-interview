# 线程和进程的异同

## 相同点

1. **执行单元**：两者都是CPU调度的基本单位，代表程序执行的活动
2. **可并发执行**：都支持并发执行，提高系统的资源利用率
3. **有生命周期**：都有创建、运行、阻塞和结束等状态
4. **消耗系统资源**：都需要消耗系统资源，只是程度不同

## 不同点

1. **基本定义**：
   - **进程**：操作系统分配资源的基本单位，是一个独立的程序执行实例
   - **线程**：CPU调度的最小单位，是进程内的执行流
2. **资源占用**：
   - **进程**：拥有独立的内存空间、文件句柄等系统资源
   - **线程**：共享所属进程的内存空间和资源，自身只拥有少量必要资源（如栈空间）
3. **通信方式**：
   - **进程间通信**：需要特殊的IPC机制（如管道、消息队列、共享内存等）
   - **线程间通信**：可直接通过共享内存通信，更简单高效
4. **上下文切换开销**：
   - **进程切换**：开销较大，需要保存/恢复更多上下文信息
   - **线程切换**：开销较小，仅需保存/恢复少量寄存器内容
5. **创建和销毁开销**：
   - **进程**：创建和销毁开销大
   - **线程**：创建和销毁开销小
6. **安全性和稳定性**：
   - **进程**：一个进程崩溃通常不影响其他进程
   - **线程**：一个线程崩溃会导致整个进程崩溃

## 在iOS中的应用

在iOS开发中，理解线程和进程的区别尤为重要：

```swift
// 主线程执行UI更新
DispatchQueue.main.async {
    self.label.text = "更新完成"
}

// 后台线程执行耗时操作
DispatchQueue.global().async {
    // 执行耗时计算或网络请求
    let result = self.performHeavyTask()
    
    // 完成后回到主线程更新UI
    DispatchQueue.main.async {
        self.updateUIWithResult(result)
    }
}
```

iOS应用通常是单进程多线程模型，一个应用就是一个进程，而GCD和Operation提供了线程管理的抽象，让开发者能更高效地利用多线程。